<nav class="bg-dark text-white sidebar">
  <div class="d-flex align-items-center justify-content-between p-3">
    <span class="fs-4">Admin Panel</span>
    <i class="fas fa-bars" data-bs-toggle="collapse" data-bs-target="#admin-sidebar-menu" aria-expanded="false" aria-controls="admin-sidebar-menu" style="cursor: pointer;"></i>
  </div>
  <hr class="mx-3 my-2">
  
  <div class="collapse show" id="admin-sidebar-menu">
    <!-- Core Management Section -->

    <ul class="nav flex-column px-2 mb-3">
      <li class="nav-item mb-1">
        <a href="/admin/dashboard" class="nav-link text-white rounded <%= path === '/admin/dashboard' ? 'active' : '' %>">
          <i class="fas fa-tachometer-alt me-2"></i>Dashboard
        </a>
      </li>
    </ul>

    <!-- Property Management Section -->

    <ul class="nav flex-column px-2 mb-3">
      <li class="nav-item mb-1">
        <a class="nav-link text-white rounded" data-bs-toggle="collapse" href="#property-submenu" role="button" aria-expanded="false" aria-controls="property-submenu">
          <i class="fas fa-building me-2"></i>Property
          <i class="fas fa-chevron-down float-end"></i>
        </a>
        <div class="collapse" id="property-submenu">
          <ul class="nav flex-column pl-3">
            <li class="nav-item">
              <a href="/admin/rooms" class="nav-link text-white rounded <%= path.startsWith('/admin/rooms') ? 'active' : '' %>">
                <i class="fas fa-bed me-2"></i>Rooms
              </a>
            </li>
            <li class="nav-item">
              <a href="/admin/room-types" class="nav-link text-white rounded <%= path.startsWith('/admin/room-types') ? 'active' : '' %>">
                <i class="fas fa-tags me-2"></i>Room Types
              </a>
            </li>
            <li class="nav-item">
              <a href="/admin/amenities" class="nav-link text-white rounded <%= path.startsWith('/admin/amenities') ? 'active' : '' %>">
                <i class="fas fa-concierge-bell me-2"></i>Amenities
              </a>
            </li>
          </ul>
        </div>
      </li>
    </ul>

    <!-- Booking & Order Management Section -->
    
    <ul class="nav flex-column px-2 mb-3">
      <li class="nav-item mb-1">
        <a class="nav-link text-white rounded" data-bs-toggle="collapse" href="#booking-submenu" role="button" aria-expanded="false" aria-controls="booking-submenu">
          <i class="fas fa-clipboard-list me-2"></i>Bookings & Orders
          <i class="fas fa-chevron-down float-end"></i>
        </a>
        <div class="collapse" id="booking-submenu">
          <ul class="nav flex-column pl-3">
            <li class="nav-item">
              <a href="/admin/bookings" class="nav-link text-white rounded <%= path.startsWith('/admin/bookings') ? 'active' : '' %>">
                <i class="fas fa-calendar-check me-2"></i>Bookings
              </a>
            </li>
            <li class="nav-item">
              <a href="/admin/orders" class="nav-link text-white rounded <%= path.startsWith('/admin/orders') ? 'active' : '' %>">
                <i class="fas fa-shopping-cart me-2"></i>Orders
              </a>
            </li>
            <li class="nav-item">
              <a href="/admin/order-items" class="nav-link text-white rounded <%= path.startsWith('/admin/order-items') ? 'active' : '' %>">
                <i class="fas fa-utensils me-2"></i>Menu Items
              </a>
            </li>
          </ul>
        </div>
      </li>
    </ul>

    <!-- User & Staff Management Section -->
    
    <ul class="nav flex-column px-2 mb-3">
      <li class="nav-item mb-1">
        <a class="nav-link text-white rounded" data-bs-toggle="collapse" href="#user-submenu" role="button" aria-expanded="false" aria-controls="user-submenu">
          <i class="fas fa-users me-2"></i>Users & Staff
          <i class="fas fa-chevron-down float-end"></i>
        </a>
        <div class="collapse" id="user-submenu">
          <ul class="nav flex-column pl-3">
            <li class="nav-item">
              <a href="/admin/users" class="nav-link text-white rounded <%= path === '/admin/users' ? 'active' : '' %>">
                <i class="fas fa-user me-2"></i>Users
              </a>
            </li>
            <li class="nav-item">
              <a href="/admin/users/appeals" class="nav-link text-white rounded <%= path === '/admin/users/appeals' ? 'active' : '' %>">
                <i class="fas fa-gavel me-2"></i>User Appeals
              </a>
            </li>
            <li class="nav-item">
              <a href="/admin/staff" class="nav-link text-white rounded <%= path.startsWith('/admin/staff') ? 'active' : '' %>">
                <i class="fas fa-user-tie me-2"></i>Staff
              </a>
            </li>
          </ul>
        </div>
      </li>
    </ul>
  </div>

  <!-- Site Navigation -->
  <div class="nav-item mt-3 mx-3">
    <a href="/" class="btn btn-outline-light btn-sm w-100">
      <i class="fas fa-home me-2"></i>Back to Site
    </a>
  </div>
</nav>

<style>
.sidebar .nav-link[aria-expanded="true"] .fa-chevron-down {
  transform: rotate(180deg);
}

.sidebar .nav-link .fa-chevron-down {
  transition: transform 0.3s ease;
}

.sidebar .collapse.show {
  display: block;
}

.sidebar .nav-link {
  position: relative;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Close other submenus when one is opened
  const submenus = document.querySelectorAll('[data-bs-toggle="collapse"]');
  submenus.forEach(submenu => {
    submenu.addEventListener('click', function() {
      const targetId = this.getAttribute('href');
      const targetSubmenu = document.querySelector(targetId);
      
      // Close other open submenus
      document.querySelectorAll('.collapse').forEach(collapse => {
        if (collapse !== targetSubmenu) {
          bootstrap.Collapse.getInstance(collapse)?.hide();
        }
      });
    });
  });
});
</script>